---
import astroLogo from '../assets/astro.svg';
import background from '../assets/background.svg';
import diseno from '../assets/videos/disenointeriores.mp4';
import img1 from '../assets/img/img1.jpg';
import img2 from '../assets/img/img2.jpg';
import img3 from '../assets/img/img3.jpg';
import next from '../assets/img/next.svg';
import prev from '../assets/img/prev.svg';
import '../assets/styles/global.css';
import { imageConfig } from 'astro:assets';
---

<!-- Slider -->
<section class="relative w-full h-screen overflow-hidden" id="slider">
  <!-- Las imágenes del slider -->
  <div class="relative w-full h-full aspect-video slider-childs">
    <!-- Video de fondo -->
    <figure class="absolute inset-0 w-full h-full transition-opacity duration-800 opacity-100" data-slide="slide-1">
      <video class="absolute inset-0 w-full h-full object-cover" autoplay loop muted playsinline>
        <source src={diseno} type="video/mp4">
        Tu navegador no soporta la reproducción de videos.
      </video>

      <div class="absolute inset-0 flex justify-left items-center text-white text-left p-4 z-20"> <!-- Aseguramos que el texto esté por encima de la capa oscura -->
        <div>
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Bienvenido a mi sitio web</h1>
          <br>
          <a class="px-6 py-3 text-white border-2 border-white  hover:bg-gray-400 transition duration-300">PROYECTOS</a>
          <a class="px-6 py-3 text-white border-2 border-white ml-7  hover:bg-gray-400 transition duration-300">CONTACTANOS</a>
          <br>
          <br>
          <p class="text-lg md:text-xl">Explora el contenido y descubre más sobre nuestros servicios</p>
        </div>
      </div>
    </figure>

    <!-- Imagen 1 -->
    <div class="absolute inset-0 bg-black opacity-50 z-10"></div> <!-- Capa oscura con z-10 -->

    <!-- Imagen 2 -->
    <figure class="absolute inset-0 w-full h-full transition-opacity duration-500 opacity-0" data-slide="slide-2">
      <img src={img1.src} alt="Imagen 1" class="w-full h-full block object-cover" />
      <div class="absolute inset-0 w-[90%] mx-auto h-max text-white mt-auto space-y-4 py-8 hidden md:block mb-40 z-20">
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Imagen 1:</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eligendi corrupti vitae odit, dolorem amet laborum enim minus? Sint, quos reprehenderit.</p>
      </div>
    </figure>

    <!-- Imagen 3 -->
    <figure class="absolute inset-0 w-full h-full transition-opacity duration-500 opacity-0" data-slide="slide-3">
      <img src={img2.src} alt="Imagen 2" class="w-full h-full block object-cover" />
      <div class="absolute inset-0 w-[90%] mx-auto h-max text-white mt-auto space-y-4 py-8 hidden md:block mb-40 z-20">
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Imagen 2:</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eligendi corrupti vitae odit, dolorem amet laborum enim minus? Sint, quos reprehenderit.</p>
      </div>
    </figure>

    <!-- Imagen 4 -->
    <figure class="absolute inset-0 w-full h-full transition-opacity duration-500 opacity-0" data-slide="slide-4">
      <img src={img3.src} alt="Imagen 3" class="w-full h-full block object-cover" />
      <div class="absolute inset-0 w-[90%] mx-auto h-max text-white mt-auto space-y-4 py-8 hidden md:block mb-40 z-20">
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">Imagen 3:</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eligendi corrupti vitae odit, dolorem amet laborum enim minus? Sint, quos reprehenderit.</p>
      </div>
    </figure>
  </div>

  <!-- Botones de navegación -->
  <div class="relative ml-96">
    <button class="slider-prev z-50 ml-4 relative bottom-10 left-96 transform -translate-y-1/2" data-button="prev">
      <img src={prev.src} class="w-8 aspect-square md:w-12" alt="Prev" />
    </button>

    <button class="slider-next z-50 mr-4 relative bottom-10 -right-96 transform -translate-y-1/2" data-button="next">
      <img src={next.src} class="w-8 aspect-square md:w-12" alt="Next" />
    </button>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const slides = document.querySelectorAll("[data-slide]");
    let currentIndex = 0;

    // Función para mostrar la siguiente imagen
    const showNextSlide = () => {
      slides[currentIndex].classList.remove("opacity-100");
      slides[currentIndex].classList.add("opacity-0");
      currentIndex = (currentIndex + 1) % slides.length;
      slides[currentIndex].classList.remove("opacity-0");
      slides[currentIndex].classList.add("opacity-100");
    };

    // Función para mostrar la imagen anterior
    const showPrevSlide = () => {
      slides[currentIndex].classList.remove("opacity-100");
      slides[currentIndex].classList.add("opacity-0");
      currentIndex = (currentIndex - 1 + slides.length) % slides.length;
      slides[currentIndex].classList.remove("opacity-0");
      slides[currentIndex].classList.add("opacity-100");
    };

    
    // Event listeners para los botones de navegación
    const nextButton = document.querySelector(".slider-next");
    const prevButton = document.querySelector(".slider-prev");

    if (nextButton && prevButton) {
        nextButton.addEventListener("click", showNextSlide);
        prevButton.addEventListener("click", showPrevSlide);
    } else {
        console.warn("Los botones de navegación no se han encontrado en el DOM.");
    }
    
  });
</script>









